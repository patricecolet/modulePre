#N canvas 324 46 450 300 12;
#X obj 22 259 outlet~;
#N canvas 797 90 569 656 playback 0;
#X obj 57 60 line~;
#X obj 75 172 line~;
#X obj 57 203 *~;
#X obj 57 527 outlet~;
#X obj 57 499 hip~ 5;
#X obj 75 297 dbtorms;
#X obj 75 326 sqrt;
#X obj 75 355 sqrt;
#X obj 75 383 line~;
#X obj 57 470 *~;
#X obj 75 412 *~;
#X obj 75 441 *~;
#X text 127 32 messages to the phase generating line~;
#X text 135 171 line~ for de-clicking;
#X text 167 229 The envelope generator. Rather than sending our message straight to the line~ we unpack it in order to fool with the amplitude field., f 45;
#X text 146 298 convert amplitude to linear units.;
#X text 141 327 take the fourth root. This because we want to raise the line~'s output to the 4th power afterwards. This is an inexpensive way to give the rise and decay a more natural sounding evolution than just a straight line., f 52;
#X text 112 425 square the output twice to get the fourth power.;
#X obj 75 268 unpack f f;
#X obj 57 112 tabread4~ \$0sample;
#X obj 57 31 r \$0phase;
#X obj 75 143 r \$0cutoff;
#X obj 75 239 r \$0envelope;
#X connect 0 0 19 0;
#X connect 1 0 2 1;
#X connect 2 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 0 10 1;
#X connect 9 0 4 0;
#X connect 10 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 9 1;
#X connect 18 0 5 0;
#X connect 18 1 8 1;
#X connect 19 0 2 0;
#X connect 20 0 0 0;
#X connect 21 0 1 0;
#X connect 22 0 18 0;
#X restore 20 160 pd playback;
#X obj 117 157 r \$2-gain;
#X obj 21 206 *~ 1;
#X obj 117 181 dbtorms;
#N canvas 150 175 791 498 sampler.message 0;
#X obj 243 64 delay 5;
#X text 419 290 end of note;
#X text 50 272 ARGUMENTS FOR NOTES:;
#X text 81 294 pitch in halftones, f 21;
#X text 81 311 amplitude (dB), f 21;
#X text 81 345 sample number, f 21;
#X text 81 328 duration (msec), f 21;
#X text 81 362 start location (msec);
#X text 81 379 rise time (msec), f 21;
#X text 81 397 decay time (msec), f 21;
#X text 27 16 CHOCOLATE SAMPLER;
#X obj 491 188 f;
#X obj 442 162 f;
#X obj 373 162 f;
#X obj 309 162 f;
#X obj 227 162 f;
#X obj 227 189 mtof;
#X obj 227 217 / 261.62;
#X obj 227 244 * 4.41e+08;
#X obj 263 278 +;
#X obj 243 91 t b b b;
#X text 461 383 This starts the note \, sending to "receives" in the playback subpatch. The new receive "envelope" is an amplitude control in parallel with the cutoff control. The "sample-number" switches the tabread4~ between tables., f 43;
#X obj 373 217 + 1;
#X obj 373 189 * 44.1;
#X text 418 311 combine amplitude \, rise time \, start phase \, end phase \, and sample number in one message, f 43;
#X obj 372 82 unpack f f f f f f f;
#X text 25 157 transposition works by altering the phase target (\$4 below right.) The mtof and / 261 calculate speed change considering 60 as unity., f 26;
#X text 17 102 as before we mute and wait, f 13;
#X text 31 442 These demonstrate the effect of varying the parameters one by one., f 34;
#X obj 478 162 del;
#X obj 243 27 bang;
#X obj 372 55 r \$0note;
#X obj 117 71 \$0;
#X obj 309 346 list append \$0;
#X obj 491 212 list append \$0;
#X msg 491 236 \; \$2envelope 0 \$1;
#X msg 309 389 \; \$5envelope 0 \, \$1 \$2 \; \$5phase \$3 \, \$4 1e+07 \; \$5cutoff 1 5 \;;
#X obj 309 322 pack f f f f;
#X msg 117 101 \; \$1cutoff 0 5;
#X connect 0 0 20 0;
#X connect 11 0 34 0;
#X connect 12 0 37 1;
#X connect 13 0 23 0;
#X connect 14 0 37 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 37 3;
#X connect 20 0 14 0;
#X connect 20 1 15 0;
#X connect 20 2 12 0;
#X connect 20 2 29 0;
#X connect 20 2 13 0;
#X connect 22 0 19 1;
#X connect 22 0 37 2;
#X connect 23 0 22 0;
#X connect 25 0 15 1;
#X connect 25 0 30 0;
#X connect 25 1 14 1;
#X connect 25 2 29 1;
#X connect 25 3 13 1;
#X connect 25 4 12 1;
#X connect 25 5 11 1;
#X connect 29 0 11 0;
#X connect 30 0 0 0;
#X connect 30 0 32 0;
#X connect 31 0 25 0;
#X connect 32 0 38 0;
#X connect 33 0 36 0;
#X connect 34 0 35 0;
#X connect 37 0 33 0;
#X restore 62 26 pd sampler.message;
#N canvas 945 158 450 300 test 0;
#X msg 180 192 62;
#X msg 215 192 64;
#X msg 146 192 60;
#X msg 114 192 55;
#X msg 248 192 72;
#X msg 82 192 48;
#X msg 247 218 60.5;
#X text 186 10 straight playback;
#X text 184 32 change amplitude;
#X text 199 54 change sample number;
#X text 225 77 change start location;
#X text 232 99 change rise time;
#X text 207 122 change duration;
#X text 228 144 ... and decay time;
#X text 284 218 microtones OK too.;
#X text 85 168 If you omit values they stay unchanged;
#X obj 52 272 s \$0note;
#X msg 37 10 60 100 10000 0 0 0;
#X msg 44 33 60 90 10000 0 0 0;
#X msg 51 55 60 100 10000 0 0 0;
#X msg 57 77 60 100 10000 3000 0 0;
#X msg 64 101 60 100 10000 0 1000 0;
#X msg 69 123 60 100 100 0 0 0;
#X msg 73 146 60 100 100 0 0 1000;
#X connect 0 0 16 0;
#X connect 1 0 16 0;
#X connect 2 0 16 0;
#X connect 3 0 16 0;
#X connect 4 0 16 0;
#X connect 5 0 16 0;
#X connect 6 0 16 0;
#X connect 17 0 16 0;
#X connect 18 0 16 0;
#X connect 19 0 16 0;
#X connect 20 0 16 0;
#X connect 21 0 16 0;
#X connect 22 0 16 0;
#X connect 23 0 16 0;
#X restore 229 27 pd test;
#N canvas 591 196 487 506 sample 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0sample 176403 float 0;
#X coords 0 1.02 176403 -1.02 200 130 1 0 0;
#X restore 71 36 graph;
#X obj 62 418 soundfiler;
#X obj 62 266 pdcontrol;
#X msg 62 242 dir;
#X msg 62 390 read \$1/../compositions/\$2/sons/\$3 \$4sample;
#X obj 284 175 r \$2;
#X obj 62 290 list append \$1;
#X obj 62 361 list append \$0;
#X obj 62 332 list append;
#X obj 284 199 t b a;
#X connect 2 0 6 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 5 0 9 0;
#X connect 6 0 8 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 9 0 3 0;
#X connect 9 1 8 1;
#X restore 231 65 pd sample;
#N canvas 639 421 450 300 play.messages 0;
#X obj 116 19 r play\$3;
#X obj 116 43 route \$2;
#X obj 115 258 s \$0note;
#X obj 116 67 list split 1;
#X obj 158 93 list split 1;
#X obj 117 236 list append;
#X obj 133 205 list append;
#X obj 311 125 / 2;
#X obj 311 149 i;
#X obj 312 171 + 63;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 4 0;
#X connect 4 0 7 0;
#X connect 4 1 6 1;
#X connect 5 0 2 0;
#X connect 6 0 5 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 6 0;
#X restore 304 25 pd play.messages;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 4 0 3 1;
