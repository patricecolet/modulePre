#N canvas 379 84 882 472 12;
#X declare -path else;
#X obj 519 215 nbx 2 17 1 50 0 0 \$0-peaks empty empty 0 -8 0 14 #dcdcdc #000000 #000000 0 256;
#X text 474 212 peaks;
#X msg 519 242 npeak \$1;
#X obj 519 297 sigmund~ -npts 2048 -hop 512 -npeak 50 tracks;
#X obj 164 369 s~ \$0-in;
#X obj 538 269 r~ \$0-in;
#X obj 144 402 out~;
#X obj 519 376 out~;
#X obj 664 215 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 14 #dcdcdc #000000 #000000 0 256;
#X text 742 215 cents;
#X msg 664 256 all \$1;
#X text 668 333 <= open;
#X obj 519 332 clone 50 oscillator;
#X text 678 378 compare this pitch shifter with the last two we've seen, f 20;
#X obj 666 20 declare -path else;
#X obj 144 323 play.file~ bubul.wav 1 1;
#X text 40 14 The phase difference from one FFT frame to another is crucial in determining the actual pitch of a sine component. This and other elements combined form what is also known as "Phase Vocoder Analysis" and by getting the accurate pitch and amplitude of a component \, we can use this information to feed a bank of oscillators to resynthesize an analyzed sound. This opens other possibilities \, like having an independent control over each sine component. But in this example we just perform a simple pitch shift., f 51;
#X text 40 173 The native [sigmund~] object is a powerful pitch tracker and has other features we've seen earlier. It is also an object that performs "Phase Vocoder Analysis" and can spit separate tone components to feed a bank of oscillators. Being FFT based \, we give it parameters like window size (-npts) and hop size (-hop). One possible output of [sigmund~] is 'peaks' \, which outputs sinusoidal peaks in order of amplitude \, but we need something else., f 51;
#X text 431 58 The "tracks" argument in [sigmund~] sends the highest energy components (a.k.a peaks) separately into different 'tracks' \, where each one is fed into a separate oscillator. For the oscillator bank we use an abstraction loaded 50 times in [clone]. We set an initial number of 50 peaks (with -npeak) but it's possible to change that with the npeak message. Try that! The pitch shift is trivial \, in each oscillator we perform a simple transposition. Open the subpatch for more info.;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 12 0;
#X connect 5 0 3 0;
#X connect 8 0 10 0;
#X connect 10 0 12 1;
#X connect 12 0 7 0;
#X connect 15 0 4 0;
#X connect 15 0 6 0;
